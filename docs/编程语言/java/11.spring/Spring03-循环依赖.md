---
article: false
title: Spring03-循环依赖
---


### 单例作用域的循环依赖
Spring 使用三级缓存（three-level cache）来解决循环依赖问题。

#### **一级缓存**：
单例池（singleton pool），用于存储完全初始化的单例 bean。

#### **二级缓存**：
早期暴露的单例对象池（early singleton pool），用于存储部分初始化的单例 bean（实例化完成但未完成依赖注入）。

#### **三级缓存**：
单例工厂（singleton factories），用于存储单例对象工厂，以便在需要时创建 bean 实例。





### **处理步骤**

#### 1.创建 bean 实例：
首先创建 bean 的实例（调用构造函数）。

#### 2.提前暴露实例：
将创建的 bean 实例放入三级缓存中，以便其他 bean 可以引用它。

#### 3.注入依赖：
对 bean 进行依赖注入。如果依赖的 bean 也需要注入当前 bean 的实例，则从三级缓存中获取。

#### 4.初始化完成：
完成 bean 的初始化（包括调用初始化方法和依赖注入）。

































