---
article: false 
title: 01.ElaticSearch 安装
---

### 第一步: 下载ElaticSearch

[官网下载地址](https://www.elastic.co/cn/downloads/elasticsearch)

### 新的用户

```shell
# 添加用户
sudo useradd elk
# 设置密码
sudo passwd elk

# 改变所有者
chown -R elk:elk ./elasticsearch-8.14.3
```

### 修改配置

elasticsearch.yml

````yaml
# ======================== Elasticsearch Configuration =========================
#
# NOTE: Elasticsearch comes with reasonable defaults for most settings.
#       Before you set out to tweak and tune the configuration, make sure you
#       understand what are you trying to accomplish and the consequences.
#
# The primary way of configuring a node is via this file. This template lists
# the most important settings you may want to configure for a production cluster.
#
# Please consult the documentation for further information on configuration options:
# https://www.elastic.co/guide/en/elasticsearch/reference/index.html
#
# ---------------------------------- Cluster  集群 -----------------------------------
#
# Use a descriptive name for your cluster:
#
#cluster.name: my-application
#
# ------------------------------------ Node  节点  ------------------------------------
#
# Use a descriptive name for the node:
#
#node.name: node-1
#
# Add custom attributes to the node:
#
#node.attr.rack: r1
#
# ----------------------------------- Paths   路径  ------------------------------------
#
# Path to directory where to store the data (separate multiple locations by comma):
#
path.data: ./data
#
# Path to log files:
#
path.logs: ./logs
#
# ----------------------------------- Memory -----------------------------------
#
# Lock the memory on startup:
#
#bootstrap.memory_lock: true
#
# Make sure that the heap size is set to about half the memory available
# on the system and that the owner of the process is allowed to use this
# limit.
#
# Elasticsearch performs poorly when the system is swapping the memory.
#
# ---------------------------------- Network -----------------------------------
#
# By default Elasticsearch is only accessible on localhost. Set a different
# address here to expose this node on the network:
#
#network.host: 0.0.0.0
#
# By default Elasticsearch listens for HTTP traffic on the first free port it
# finds starting at 9200. Set a specific HTTP port here:
# 端口
http.port: 9200
#
# For more information, consult the network module documentation.
#
# --------------------------------- Discovery ----------------------------------
#
# Pass an initial list of hosts to perform discovery when this node is started:
# The default list of hosts is ["127.0.0.1", "[::1]"]
#
#discovery.seed_hosts: ["host1", "host2"]
#
# Bootstrap the cluster using an initial set of master-eligible nodes:
#
#cluster.initial_master_nodes: ["node-1", "node-2"]
#
# For more information, consult the discovery and cluster formation module documentation.
#
# ---------------------------------- Various -----------------------------------
#
# Allow wildcard deletion of indices:
#
#action.destructive_requires_name: false

#----------------------- BEGIN SECURITY AUTO CONFIGURATION -----------------------
#
# The following settings, TLS certificates, and keys have been automatically
# generated to configure Elasticsearch security features on 22-07-2024 06:21:44
#
# --------------------------------------------------------------------------------

# Enable security features
xpack.security.enabled: true

# enrollment （ 注册 ）
xpack.security.enrollment.enabled: false

# 为HTTP API客户端连接（如Kibana、Logstash和Agent）启用加密
# Enable encryption for HTTP API client connections, such as Kibana, Logstash, and Agents
xpack.security.http.ssl:
  enabled: true
  keystore.path: certs/http.p12

# 启用群集节点之间的加密和相互身份验证
# Enable encryption and mutual authentication between cluster nodes
xpack.security.transport.ssl:
  enabled: true
  verification_mode: certificate
  keystore.path: certs/transport.p12
  truststore.path: certs/transport.p12
# Create a new cluster with the current node only
# Additional nodes can still join the cluster later
cluster.initial_master_nodes: [ "MiWiFi-RA81-srv" ]

# Allow HTTP API connections from anywhere
# Connections are encrypted and require user authentication
http.host: 0.0.0.0

# Allow other nodes to join the cluster from anywhere
# Connections are encrypted and mutually authenticated
#transport.host: 0.0.0.0

#----------------------- END SECURITY AUTO CONFIGURATION -------------------------

````

### 修改密码
./elasticsearch-setup-passwords interactive

### 重置密码
./elasticsearch-reset-password -u elastic

```shell
[elk@MiWiFi-RA81-srv bin]$ ./elasticsearch-reset-password -u elastic
This tool will reset the password of the [elastic] user to an autogenerated value.
The password will be printed in the console.
Please confirm that you would like to continue [y/N]y

Password for the [elastic] user successfully reset.
###  密码
New value: Sy_*lqEciee7N-a*NB0p

```


### elasticsearch 内置用户
```text
elastic
    角色: superuser
    描述: 拥有Elasticsearch集群的全部权限，包括管理权限。通常用于管理和配置Elasticsearch。

kibana_system
    角色: kibana_system
    描述: 用于Kibana与Elasticsearch之间的交互和通信。这个用户有权访问Kibana所需的资源。

logstash_system
    角色: logstash_system
    描述: 用于Logstash与Elasticsearch之间的交互和通信。这个用户有权访问Logstash所需的资源。

beats_system
    角色: beats_system
    描述: 用于Beats与Elasticsearch之间的交互和通信。这个用户有权访问Beats所需的资源。

remote_monitoring_user
    角色: remote_monitoring_collector, remote_monitoring_agent
    描述: 用于X-Pack监控功能，允许收集和存储监控信息。

```






