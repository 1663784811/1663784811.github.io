---
article: false
title: 01.ffmpeg学习环境搭建
icon: note
---
### 模块
libavcodec : 编/解码 <br/>
libavfilter : 帧级操作（如添加滤镜）<br/>
libavformat : 文件 I/O 和 封装/解封装 <br/>
libavdevice : 设备视频文件的封装/解封装 <br/>
libavutil : 通用工具集合<br/>
libswresample : 音频重采样、格式处理、混音等<br/>
libpostproc : 预处理<br/>
libswscale : 色彩处理和缩放<br/>

### 解码流程图
![20210415092849383.png](img%2F20210415092849383.png)



### 学习环境搭建

### windows ffmpeg编译


### 下载源码和软件

```text
# 下载ffmpeg源码
https://ffmpeg.org/download.html
# 下载msys2
https://www.msys2.org/

```

### msys2
```text
打开 MSYS2 MINGW64

msys2 的 pacman（Package Manager）是一个包管理工具。相当于centos的 yum
pacman -Sl：搜索有哪些包可以安装
pacman -S：安装
pacman -R：卸载

#################

# 编译工具链
pacman -S mingw-w64-x86_64-toolchain
pacman -S mingw-w64-x86_64-yasm
pacman -S mingw-w64-x86_64-SDL2
pacman -S mingw-w64-x86_64-fdk-aac
pacman -S mingw-w64-x86_64-x264
pacman -S mingw-w64-x86_64-x265

# 需要单独安装make
pacman -S make

```

### 编译windows执行程序 ( 要编译android需要的.so文件则请在linux下编译 )

```text
./configure --prefix=/usr/local/ffmpeg --enable-shared --disable-static --enable-gpl  --enable-nonfree --enable-libfdk-aac --enable-libx264 --enable-libx265

make -j8 && make install

## 编译后的目录结构
在目录/usr/local/ffmpeg下
├─bin
├─include
│  ├─libavcodec
│  ├─libavdevice
│  ├─libavfilter
│  ├─libavformat
│  ├─libavutil
│  ├─libpostproc
│  ├─libswresample
│  └─libswscale
├─lib
│  └─pkgconfig
└─share
    ├─ffmpeg
    │  └─examples
    └─man
        ├─man1
        └─man3
```

### 新建VS C++ 空项目

![img.png](img/02img.png)
###  添加入口文件
![img.png](img/03img.png)

```c
#include<stdio.h>
extern "C" {
#include <libavcodec\avcodec.h>

}
#pragma comment(lib, "avcodec.lib")


int main() {

	printf("%s\n", avcodec_configuration());
	return 0;
}

```
### 配置include目录
![img.png](img/04img.png)

### 配置lib库目录
![img.png](img/05img.png)

### 可能能会找不到DLL文件
在Path中添加dll目录
![img.png](img/06img.png)

### 验证
















